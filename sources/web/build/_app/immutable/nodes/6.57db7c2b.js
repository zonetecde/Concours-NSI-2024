import{s as ve,o as be,i as ke,r as de,n as X}from"../chunks/scheduler.033d2a90.js";import{S as ge,i as ye,g as V,s as M,r as he,h as I,j,c as A,u as _e,f as b,k,a as P,x as m,v as me,t as U,b as Y,d as B,w as pe,m as R,B as O,n as q,A as Q,o as H,H as Z,p as ee,E as W,L as we,F as te,e as le}from"../chunks/index.3f6478a0.js";import{e as F}from"../chunks/each.02839fee.js";import{R as Ee,E as xe}from"../chunks/Retour.f04dd909.js";import{A as De}from"../chunks/Api.2528454f.js";import{f as se}from"../chunks/index.5e6fda25.js";function oe(s,e,l){const t=s.slice();return t[24]=e[l],t}function re(s,e,l){const t=s.slice();return t[27]=e[l],t}function ie(s,e,l){const t=s.slice();return t[21]=e[l],t}function Ce(s){let e,l,t,i,E,v,f,d,n,p,o,c,a,w=Math.round(s[1].Duree-s[2])+"",N,T=F(s[5]),g=[];for(let h=0;h<T.length;h+=1)g[h]=ue(oe(s,T,h));return{c(){e=V("div"),l=V("div"),t=M(),i=V("div");for(let h=0;h<g.length;h+=1)g[h].c();v=M(),f=V("div"),d=V("p"),n=R("Score : "),p=R(s[3]),o=M(),c=V("p"),a=R("Temps restant : "),N=R(w),this.h()},l(h){e=I(h,"DIV",{class:!0});var C=j(e);l=I(C,"DIV",{class:!0}),j(l).forEach(b),t=A(C),i=I(C,"DIV",{class:!0,style:!0});var _=j(i);for(let y=0;y<g.length;y+=1)g[y].l(_);_.forEach(b),C.forEach(b),v=A(h),f=I(h,"DIV",{class:!0});var r=j(f);d=I(r,"P",{class:!0});var x=j(d);n=q(x,"Score : "),p=q(x,s[3]),x.forEach(b),o=A(r),c=I(r,"P",{class:!0});var u=j(c);a=q(u,"Temps restant : "),N=q(u,w),u.forEach(b),r.forEach(b),this.h()},h(){k(l,"class","absolute border-y-2 border-[#206442] bg-[#ffffff2d] bottom-[90px] h-[40px] w-full"),k(i,"class","overflow-hidden w-full h-full grid absolute bottom-0 divide-x-2 divide-[#206442]"),k(i,"style",E=`grid-template-columns: repeat(${s[5].length}, minmax(0, 1fr))`),k(e,"class","w-[450px] h-[600px] bg-[#84af80] outline-4 rounded-xl outline-[#206442] outline relative"),k(d,"class","text-2xl"),k(c,"class","text-2xl"),k(f,"class","absolute top-5 w-full flex justify-between items-center px-8")},m(h,C){P(h,e,C),m(e,l),m(e,t),m(e,i);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(i,null);P(h,v,C),P(h,f,C),m(f,d),m(d,n),m(d,p),m(f,o),m(f,c),m(c,a),m(c,N)},p(h,C){if(C&102){T=F(h[5]);let _;for(_=0;_<T.length;_+=1){const r=oe(h,T,_);g[_]?g[_].p(r,C):(g[_]=ue(r),g[_].c(),g[_].m(i,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=T.length}C&32&&E!==(E=`grid-template-columns: repeat(${h[5].length}, minmax(0, 1fr))`)&&k(i,"style",E),C&8&&H(p,h[3]),C&6&&w!==(w=Math.round(h[1].Duree-h[2])+"")&&H(N,w)},i:X,o:X,d(h){h&&(b(e),b(v),b(f)),W(g,h)}}}function Ve(s){let e,l="Rythme",t,i,E,v,f=`<p class="mt-8 text-xl mb-4">Règles de l&#39;exercice :</p> <p class="text-lg">Des cercles tomberons du haut de l&#39;écran. Appuyer sur la touche correspondante lorsque le cercle est entre les deux barres. <br/>Si le cercle se prolonge, appuyez sur la touche correspondante
				au moment où il commence à toucher la ligne jusqu&#39;à ce qu&#39;il finisse de tomber entièrement.</p>`,d,n,p,o,c="Niveaux :",a,w,N,T,g="Appuyez sur ENTRÉE pour commencer l'exercice",h;i=new xe({props:{image:"/keyboard/rythme.jpg",nom:"Rythme",handleClick:s[10]}});let C=F(s[0]),_=[];for(let r=0;r<C.length;r+=1)_[r]=ce(ie(s,C,r));return{c(){e=V("h1"),e.textContent=l,t=M(),he(i.$$.fragment),E=M(),v=V("div"),v.innerHTML=f,d=M(),n=V("div"),p=V("div"),o=V("p"),o.textContent=c,a=M(),w=V("div");for(let r=0;r<_.length;r+=1)_[r].c();N=M(),T=V("p"),T.textContent=g,this.h()},l(r){e=I(r,"H1",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-fck7zt"&&(e.textContent=l),t=A(r),_e(i.$$.fragment,r),E=A(r),v=I(r,"DIV",{class:!0,"data-svelte-h":!0}),O(v)!=="svelte-12rn52d"&&(v.innerHTML=f),d=A(r),n=I(r,"DIV",{class:!0});var x=j(n);p=I(x,"DIV",{class:!0});var u=j(p);o=I(u,"P",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-qirts0"&&(o.textContent=c),a=A(u),w=I(u,"DIV",{class:!0});var y=j(w);for(let D=0;D<_.length;D+=1)_[D].l(y);y.forEach(b),u.forEach(b),x.forEach(b),N=A(r),T=I(r,"P",{class:!0,"data-svelte-h":!0}),O(T)!=="svelte-1w39gdb"&&(T.textContent=g),this.h()},h(){k(e,"class","font-bold text-3xl mb-6 mt-7"),k(v,"class","text-center"),k(o,"class","pr-2 mb-2"),k(w,"class","flex gap-x-8"),k(p,"class","flex flex-col w-full"),k(n,"class","md:w-full max-w-[1000px] mt-4 p-4 justify-center items-center flex flex-row bg-[#ffffff25] rounded-xl"),k(T,"class","mt-8 mb-5")},m(r,x){P(r,e,x),P(r,t,x),me(i,r,x),P(r,E,x),P(r,v,x),P(r,d,x),P(r,n,x),m(n,p),m(p,o),m(p,a),m(p,w);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m(w,null);P(r,N,x),P(r,T,x),h=!0},p(r,x){if(x&257){C=F(r[0]);let u;for(u=0;u<C.length;u+=1){const y=ie(r,C,u);_[u]?_[u].p(y,x):(_[u]=ce(y),_[u].c(),_[u].m(w,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=C.length}},i(r){h||(B(i.$$.fragment,r),h=!0)},o(r){U(i.$$.fragment,r),h=!1},d(r){r&&(b(e),b(t),b(E),b(v),b(d),b(n),b(N),b(T)),pe(i,r),W(_,r)}}}function ne(s){let e,l;return{c(){e=V("div"),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0}),j(e).forEach(b),this.h()},h(){k(e,"class","w-10 h-10 rounded-full absolute key svelte-1sd71nn"),k(e,"style",l=`height: ${s[27].hold?s[27].hold_time*120:"40"}px;
									
									top: ${s[2]>=s[27].time-4?`calc(100% + ${s[27].hold_time*120}px)`:`calc(-10% - ${s[27].hold_time*120}px)`}; 
									transition: top ${s[27].time-s[2]+1+(s[27].hold?s[27].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(s[2]-s[27].time)<(s[27].hold?s[27].hold_time*.7:.1)&&s[6].includes(s[24])?"background-color: red;":"background-color: #4d4bd4;"}`)},m(t,i){P(t,e,i)},p(t,i){i&102&&l!==(l=`height: ${t[27].hold?t[27].hold_time*120:"40"}px;
									
									top: ${t[2]>=t[27].time-4?`calc(100% + ${t[27].hold_time*120}px)`:`calc(-10% - ${t[27].hold_time*120}px)`}; 
									transition: top ${t[27].time-t[2]+1+(t[27].hold?t[27].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(t[2]-t[27].time)<(t[27].hold?t[27].hold_time*.7:.1)&&t[6].includes(t[24])?"background-color: red;":"background-color: #4d4bd4;"}`)&&k(e,"style",l)},d(t){t&&b(e)}}}function ae(s){let e,l=s[27].key===s[24]&&ne(s);return{c(){l&&l.c(),e=le()},l(t){l&&l.l(t),e=le()},m(t,i){l&&l.m(t,i),P(t,e,i)},p(t,i){t[27].key===t[24]?l?l.p(t,i):(l=ne(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&b(e),l&&l.d(t)}}}function ue(s){let e,l,t,i=s[24].toUpperCase()+"",E,v,f=F(s[1].Touches),d=[];for(let n=0;n<f.length;n+=1)d[n]=ae(re(s,f,n));return{c(){e=V("div");for(let n=0;n<d.length;n+=1)d[n].c();l=M(),t=V("p"),E=R(i),v=M(),this.h()},l(n){e=I(n,"DIV",{class:!0});var p=j(e);for(let c=0;c<d.length;c+=1)d[c].l(p);l=A(p),t=I(p,"P",{class:!0});var o=j(t);E=q(o,i),o.forEach(b),v=A(p),p.forEach(b),this.h()},h(){k(t,"class","text-3xl absolute bottom-[90px] font-bold"),k(e,"class","w-full h-full flex justify-center items-center relative")},m(n,p){P(n,e,p);for(let o=0;o<d.length;o+=1)d[o]&&d[o].m(e,null);m(e,l),m(e,t),m(t,E),m(e,v)},p(n,p){if(p&102){f=F(n[1].Touches);let o;for(o=0;o<f.length;o+=1){const c=re(n,f,o);d[o]?d[o].p(c,p):(d[o]=ae(c),d[o].c(),d[o].m(e,l))}for(;o<d.length;o+=1)d[o].d(1);d.length=f.length}p&32&&i!==(i=n[24].toUpperCase()+"")&&H(E,i)},d(n){n&&b(e),W(d,n)}}}function ce(s){let e,l,t=s[21].Nom+"",i,E,v,f,d,n=s[21].Difficulte+"",p,o,c,a,w,N,T=!1,g,h,C,_;function r(){return s[14](s[21])}return h=we(s[13][0]),{c(){e=V("div"),l=V("label"),i=R(t),v=M(),f=V("p"),d=R("Difficulté : "),p=R(n),o=R("/5"),c=M(),a=V("input"),g=M(),this.h()},l(x){e=I(x,"DIV",{class:!0});var u=j(e);l=I(u,"LABEL",{class:!0,for:!0});var y=j(l);i=q(y,t),y.forEach(b),v=A(u),f=I(u,"P",{});var D=j(f);d=q(D,"Difficulté : "),p=q(D,n),o=q(D,"/5"),D.forEach(b),c=A(u),a=I(u,"INPUT",{type:!0,id:!0,name:!0,class:!0}),g=A(u),u.forEach(b),this.h()},h(){k(l,"class","font-bold"),k(l,"for",E=s[21].Nom),k(a,"type","radio"),k(a,"id",w=s[21].Nom),k(a,"name","niveau"),k(a,"class","mt-2"),a.__value=N=s[21].Nom,te(a,a.__value),k(e,"class","w-48 h-20 bg-blue-300 outline outline-2 outline-blue-400 flex items-center flex-col justify-center rounded-xl"),h.p(a)},m(x,u){P(x,e,u),m(e,l),m(l,i),m(e,v),m(e,f),m(f,d),m(f,p),m(f,o),m(e,c),m(e,a),a.checked=a.__value===s[8],m(e,g),C||(_=[Q(a,"change",s[12]),Q(e,"click",r)],C=!0)},p(x,u){s=x,u&1&&t!==(t=s[21].Nom+"")&&H(i,t),u&1&&E!==(E=s[21].Nom)&&k(l,"for",E),u&1&&n!==(n=s[21].Difficulte+"")&&H(p,n),u&1&&w!==(w=s[21].Nom)&&k(a,"id",w),u&1&&N!==(N=s[21].Nom)&&(a.__value=N,te(a,a.__value),T=!0),(T||u&257)&&(a.checked=a.__value===s[8])},d(x){x&&b(e),h.r(),C=!1,de(_)}}}function fe(s){let e,l,t,i,E="Vos résultats :",v,f,d,n,p,o,c,a=Math.round(s[3]/s[4]*100)+"",w,N,T,g,h,C="Recommencer",_,r,x="Retour",u,y,D,$;return{c(){e=V("div"),l=V("div"),t=V("div"),i=V("h2"),i.textContent=E,v=M(),f=V("p"),d=R("Vous avez un score de "),n=R(s[3]),p=R(". "),o=V("br"),c=R("Votre précision est de "),w=R(a),N=R("%"),T=M(),g=V("div"),h=V("button"),h.textContent=C,_=M(),r=V("a"),r.textContent=x,this.h()},l(L){e=I(L,"DIV",{class:!0});var z=j(e);l=I(z,"DIV",{class:!0});var G=j(l);t=I(G,"DIV",{class:!0});var J=j(t);i=I(J,"H2",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-14uk5ao"&&(i.textContent=E),v=A(J),f=I(J,"P",{});var S=j(f);d=q(S,"Vous avez un score de "),n=q(S,s[3]),p=q(S,". "),o=I(S,"BR",{}),c=q(S,"Votre précision est de "),w=q(S,a),N=q(S,"%"),S.forEach(b),J.forEach(b),T=A(G),g=I(G,"DIV",{class:!0});var K=j(g);h=I(K,"BUTTON",{class:!0,"data-svelte-h":!0}),O(h)!=="svelte-1ncmxfn"&&(h.textContent=C),_=A(K),r=I(K,"A",{class:!0,href:!0,"data-svelte-h":!0}),O(r)!=="svelte-z239q3"&&(r.textContent=x),K.forEach(b),G.forEach(b),z.forEach(b),this.h()},h(){k(i,"class","text-4xl font-bold text-center mb-8"),k(t,"class","text-2xl text-justify"),k(h,"class","bg-yellow-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-yellow-500 transition-all w-2/5"),k(r,"class","bg-red-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-red-500 transition-all w-2/5 flex items-center justify-center"),k(r,"href","/keyboard"),k(g,"class","flex justify-center gap-x-8 mt-4 h-14"),k(l,"class","flex flex-col gap-y-4 w-3/5 py-12 px-12 bg-[#abc8d6] border-4 border-[#859aa5] text-black shadow-xl rounded-xl"),k(e,"class","absolute inset-0 backdrop-blur-sm flex items-center justify-center bg-black bg-opacity-20")},m(L,z){P(L,e,z),m(e,l),m(l,t),m(t,i),m(t,v),m(t,f),m(f,d),m(f,n),m(f,p),m(f,o),m(f,c),m(f,w),m(f,N),m(l,T),m(l,g),m(g,h),m(g,_),m(g,r),y=!0,D||($=[Q(h,"click",s[15]),Q(r,"click",s[11])],D=!0)},p(L,z){(!y||z&8)&&H(n,L[3]),(!y||z&24)&&a!==(a=Math.round(L[3]/L[4]*100)+"")&&H(w,a)},i(L){y||(L&&ke(()=>{y&&(u||(u=Z(e,se,{},!0)),u.run(1))}),y=!0)},o(L){L&&(u||(u=Z(e,se,{},!1)),u.run(0)),y=!1},d(L){L&&b(e),L&&u&&u.end(),D=!1,de($)}}}function Ie(s){let e,l,t,i,E,v,f;const d=[Ve,Ce],n=[];function p(c,a){return c[7]?1:0}l=p(s),t=n[l]=d[l](s);let o=s[9]&&fe(s);return v=new Ee({props:{urlToGo:"/keyboard",taille:"w-10 h-10 bottom-3 left-3",toExecuteBefore:s[11]}}),{c(){e=V("div"),t.c(),i=M(),o&&o.c(),E=M(),he(v.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var a=j(e);t.l(a),i=A(a),o&&o.l(a),E=A(a),_e(v.$$.fragment,a),a.forEach(b),this.h()},h(){k(e,"class","flex px-10 h-screen justify-center flex-col items-center w-screen")},m(c,a){P(c,e,a),n[l].m(e,null),m(e,i),o&&o.m(e,null),m(e,E),me(v,e,null),f=!0},p(c,[a]){let w=l;l=p(c),l===w?n[l].p(c,a):(ee(),U(n[w],1,1,()=>{n[w]=null}),Y(),t=n[l],t?t.p(c,a):(t=n[l]=d[l](c),t.c()),B(t,1),t.m(e,i)),c[9]?o?(o.p(c,a),a&512&&B(o,1)):(o=fe(c),o.c(),B(o,1),o.m(e,E)):o&&(ee(),U(o,1,1,()=>{o=null}),Y())},i(c){f||(B(t),B(o),B(v.$$.fragment,c),f=!0)},o(c){U(t),U(o),U(v.$$.fragment,c),f=!1},d(c){c&&b(e),n[l].d(),o&&o.d(),pe(v)}}}function Te(s,e,l){let t=[],i,E=0,v=0,f=0,d=[],n=[],p=["a","z","e","r","t","y","u","i","o","p","q","s","d","f","g","h","j","k","l","m","w","x","c","v","b","n"],o=[],c,a=!1,w="Blue Ocean",N=!1;be(async()=>{window.addEventListener("keydown",g),window.addEventListener("keyup",T),l(0,t=await De.api.recuperer_niveaux_rythme())});function T(y){a&&l(6,o=o.filter(D=>D!==y.key))}function g(y){if(y.key==="Enter"&&!a)h();else if(a){const D=i.Touches.find($=>$.key===y.key&&Math.abs(E-$.time)<.35+($.hold?$.hold_time*.3:0));if(D){if(o.includes(y.key))return;o.push(y.key),D.hold?setTimeout(()=>{o.includes(y.key)&&(n.find($=>$.key==D.key&&$.time==D.time)||(l(3,v++,v),n.push({time:D.time,key:D.key})))},D.hold_time*.5*1e3-(E-D.time)*1e3):n.find($=>$.key==D.key&&$.time==D.time)||(l(3,v++,v),n.push({time:D.time,key:D.key}))}}}function h(){l(7,a=!0);const y=t.find(D=>D.Nom===w);if(y){l(4,f=y.Touches.length),l(1,i=y),l(5,d=i.Touches.map($=>$.key)),l(5,d=d.filter(($,L,z)=>z.indexOf($)===L)),d.sort(($,L)=>p.indexOf($)-p.indexOf(L)),c=new Audio(`/audio/rythme/${i.Audio}`),c.play();const D=setInterval(()=>{l(2,E=c.currentTime)},10);c.onended=()=>{clearInterval(D),setTimeout(()=>{l(9,N=!0)},1e3)}}}function C(){window.removeEventListener("keydown",g),window.removeEventListener("keyup",T),c.pause()}const _=[[]];function r(){w=this.__value,l(8,w)}return[t,i,E,v,f,d,o,a,w,N,h,C,r,_,y=>{l(8,w=y.Nom)},()=>{window.location.reload()}]}class Pe extends ge{constructor(e){super(),ye(this,e,Te,Ie,ve,{})}}export{Pe as component};
