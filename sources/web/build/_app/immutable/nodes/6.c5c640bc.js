import{s as Te,h as Pe,o as je,j as Ne,r as we,n as ie}from"../chunks/scheduler.068ba370.js";import{S as Le,i as Ae,g as I,s as B,r as Ee,h as T,j as A,c as O,u as De,f as d,k as p,a as U,x as o,v as Ve,t as ee,b as ne,d as X,w as Ie,m as $,n as z,A as re,o as H,H as ae,p as ue,E as se,B as fe,L as Ce,F as ce,e as de}from"../chunks/index.f9a6f2a7.js";import{e as te}from"../chunks/each.3bc3ad31.js";import{R as Me,E as Re}from"../chunks/Retour.995db61b.js";import{A as qe}from"../chunks/Api.2528454f.js";import{f as he}from"../chunks/index.9e8c6fe2.js";import{l as $e}from"../chunks/Store.477401d9.js";function _e(l,e,r){const t=l.slice();return t[25]=e[r],t}function pe(l,e,r){const t=l.slice();return t[28]=e[r],t}function me(l,e,r){const t=l.slice();return t[22]=e[r],t}function ze(l){let e,r,t,u,w,m,f,n,a,y,s,i,g=l[10]=="fr"?"Temps restant":"Time left",C,h,M=Math.round(l[1].Duree-l[2])+"",S,R=te(l[5]),E=[];for(let _=0;_<R.length;_+=1)E[_]=ge(_e(l,R,_));return{c(){e=I("div"),r=I("div"),t=B(),u=I("div");for(let _=0;_<E.length;_+=1)E[_].c();m=B(),f=I("div"),n=I("p"),a=$("Score : "),y=$(l[3]),s=B(),i=I("p"),C=$(g),h=$(" : "),S=$(M),this.h()},l(_){e=T(_,"DIV",{class:!0});var D=A(e);r=T(D,"DIV",{class:!0}),A(r).forEach(d),t=O(D),u=T(D,"DIV",{class:!0,style:!0});var k=A(u);for(let v=0;v<E.length;v+=1)E[v].l(k);k.forEach(d),D.forEach(d),m=O(_),f=T(_,"DIV",{class:!0});var P=A(f);n=T(P,"P",{class:!0});var N=A(n);a=z(N,"Score : "),y=z(N,l[3]),N.forEach(d),s=O(P),i=T(P,"P",{class:!0});var V=A(i);C=z(V,g),h=z(V," : "),S=z(V,M),V.forEach(d),P.forEach(d),this.h()},h(){p(r,"class","absolute border-y-2 border-[#206442] bg-[#ffffff2d] bottom-[90px] h-[40px] w-full"),p(u,"class","overflow-hidden w-full h-full grid absolute bottom-0 divide-x-2 divide-[#206442]"),p(u,"style",w=`grid-template-columns: repeat(${l[5].length}, minmax(0, 1fr))`),p(e,"class","w-[450px] h-[600px] bg-[#84af80] outline-4 rounded-xl outline-[#206442] outline relative"),p(n,"class","text-2xl"),p(i,"class","text-2xl"),p(f,"class","absolute top-5 w-full flex justify-between items-center px-8")},m(_,D){U(_,e,D),o(e,r),o(e,t),o(e,u);for(let k=0;k<E.length;k+=1)E[k]&&E[k].m(u,null);U(_,m,D),U(_,f,D),o(f,n),o(n,a),o(n,y),o(f,s),o(f,i),o(i,C),o(i,h),o(i,S)},p(_,D){if(D&102){R=te(_[5]);let k;for(k=0;k<R.length;k+=1){const P=_e(_,R,k);E[k]?E[k].p(P,D):(E[k]=ge(P),E[k].c(),E[k].m(u,null))}for(;k<E.length;k+=1)E[k].d(1);E.length=R.length}D&32&&w!==(w=`grid-template-columns: repeat(${_[5].length}, minmax(0, 1fr))`)&&p(u,"style",w),D&8&&H(y,_[3]),D&1024&&g!==(g=_[10]=="fr"?"Temps restant":"Time left")&&H(C,g),D&6&&M!==(M=Math.round(_[1].Duree-_[2])+"")&&H(S,M)},i:ie,o:ie,d(_){_&&(d(e),d(m),d(f)),se(E,_)}}}function Se(l){let e,r="Rythme",t,u,w,m,f,n=l[10]==="fr"?"Règles de l'exercice :":"Exercise rules :",a,y,s,i=l[10]==="fr"?`Des cercles tomberons du haut de l'écran. Appuyer sur la touche correspondante lorsque le cercle est entre les deux barres. 
Si le cercle se prolonge, appuyez sur la touche correspondante au moment où il commence à toucher la ligne jusqu'à ce qu'il finisse de tomber entièrement.`:`Circles will fall from the top of the screen. Press the corresponding key when the circle is between the two bars. 
If the circle extends, press the corresponding key when it starts to touch the line until it finishes falling completely.`,g,C,h,M,S,R=l[10]==="fr"?"Niveaux :":"Levels :",E,_,D,k,P,N="Créer vos propres niveaux dans <code>/sources/keyboard/rythme/level_creator.py</code>",V,v,j=l[10]==="fr"?"Appuyez sur Entrée pour commencer l'exercice":"Press Enter to start the exercise",G,Q;u=new Re({props:{image:"/keyboard/rythme.jpg",nom:"Rythme",handleClick:l[11]}});let x=te(l[0]),L=[];for(let c=0;c<x.length;c+=1)L[c]=ke(me(l,x,c));return{c(){e=I("h1"),e.textContent=r,t=B(),Ee(u.$$.fragment),w=B(),m=I("div"),f=I("p"),a=$(n),y=B(),s=I("p"),g=$(i),C=B(),h=I("div"),M=I("div"),S=I("p"),E=$(R),_=B(),D=I("div");for(let c=0;c<L.length;c+=1)L[c].c();k=B(),P=I("p"),P.innerHTML=N,V=B(),v=I("p"),G=$(j),this.h()},l(c){e=T(c,"H1",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-fck7zt"&&(e.textContent=r),t=O(c),De(u.$$.fragment,c),w=O(c),m=T(c,"DIV",{class:!0});var q=A(m);f=T(q,"P",{class:!0});var b=A(f);a=z(b,n),b.forEach(d),y=O(q),s=T(q,"P",{class:!0});var Y=A(s);g=z(Y,i),Y.forEach(d),q.forEach(d),C=O(c),h=T(c,"DIV",{class:!0});var K=A(h);M=T(K,"DIV",{class:!0});var J=A(M);S=T(J,"P",{class:!0});var le=A(S);E=z(le,R),le.forEach(d),_=O(J),D=T(J,"DIV",{class:!0});var F=A(D);for(let Z=0;Z<L.length;Z+=1)L[Z].l(F);k=O(F),P=T(F,"P",{class:!0,"data-svelte-h":!0}),fe(P)!=="svelte-1r54q0v"&&(P.innerHTML=N),F.forEach(d),J.forEach(d),K.forEach(d),V=O(c),v=T(c,"P",{class:!0});var W=A(v);G=z(W,j),W.forEach(d),this.h()},h(){p(e,"class","font-bold text-3xl mb-6 mt-7"),p(f,"class","mt-8 text-xl mb-4"),p(s,"class","text-lg"),p(m,"class","text-center"),p(S,"class","pr-2 mb-2"),p(P,"class","w-36"),p(D,"class","flex gap-x-8 items-center"),p(M,"class","flex flex-col w-full"),p(h,"class","md:w-full max-w-[1000px] mt-4 p-4 justify-center items-center flex flex-row bg-[#ffffff25] rounded-xl"),p(v,"class","mt-8 mb-5")},m(c,q){U(c,e,q),U(c,t,q),Ve(u,c,q),U(c,w,q),U(c,m,q),o(m,f),o(f,a),o(m,y),o(m,s),o(s,g),U(c,C,q),U(c,h,q),o(h,M),o(M,S),o(S,E),o(M,_),o(M,D);for(let b=0;b<L.length;b+=1)L[b]&&L[b].m(D,null);o(D,k),o(D,P),U(c,V,q),U(c,v,q),o(v,G),Q=!0},p(c,q){if((!Q||q&1024)&&n!==(n=c[10]==="fr"?"Règles de l'exercice :":"Exercise rules :")&&H(a,n),(!Q||q&1024)&&i!==(i=c[10]==="fr"?`Des cercles tomberons du haut de l'écran. Appuyer sur la touche correspondante lorsque le cercle est entre les deux barres. 
Si le cercle se prolonge, appuyez sur la touche correspondante au moment où il commence à toucher la ligne jusqu'à ce qu'il finisse de tomber entièrement.`:`Circles will fall from the top of the screen. Press the corresponding key when the circle is between the two bars. 
If the circle extends, press the corresponding key when it starts to touch the line until it finishes falling completely.`)&&H(g,i),(!Q||q&1024)&&R!==(R=c[10]==="fr"?"Niveaux :":"Levels :")&&H(E,R),q&1281){x=te(c[0]);let b;for(b=0;b<x.length;b+=1){const Y=me(c,x,b);L[b]?L[b].p(Y,q):(L[b]=ke(Y),L[b].c(),L[b].m(D,k))}for(;b<L.length;b+=1)L[b].d(1);L.length=x.length}(!Q||q&1024)&&j!==(j=c[10]==="fr"?"Appuyez sur Entrée pour commencer l'exercice":"Press Enter to start the exercise")&&H(G,j)},i(c){Q||(X(u.$$.fragment,c),Q=!0)},o(c){ee(u.$$.fragment,c),Q=!1},d(c){c&&(d(e),d(t),d(w),d(m),d(C),d(h),d(V),d(v)),Ie(u,c),se(L,c)}}}function ve(l){let e,r;return{c(){e=I("div"),this.h()},l(t){e=T(t,"DIV",{class:!0,style:!0}),A(e).forEach(d),this.h()},h(){p(e,"class","w-10 h-10 rounded-full absolute key svelte-1sd71nn"),p(e,"style",r=`height: ${l[28].hold?l[28].hold_time*120:"40"}px;
									
									top: ${l[2]>=l[28].time-4?`calc(100% + ${l[28].hold_time*120}px)`:`calc(-10% - ${l[28].hold_time*120}px)`}; 
									transition: top ${l[28].time-l[2]+1+(l[28].hold?l[28].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(l[2]-l[28].time)<(l[28].hold?l[28].hold_time*.7:.1)&&l[6].includes(l[25])?"background-color: red;":"background-color: #4d4bd4;"}`)},m(t,u){U(t,e,u)},p(t,u){u&102&&r!==(r=`height: ${t[28].hold?t[28].hold_time*120:"40"}px;
									
									top: ${t[2]>=t[28].time-4?`calc(100% + ${t[28].hold_time*120}px)`:`calc(-10% - ${t[28].hold_time*120}px)`}; 
									transition: top ${t[28].time-t[2]+1+(t[28].hold?t[28].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(t[2]-t[28].time)<(t[28].hold?t[28].hold_time*.7:.1)&&t[6].includes(t[25])?"background-color: red;":"background-color: #4d4bd4;"}`)&&p(e,"style",r)},d(t){t&&d(e)}}}function be(l){let e,r=l[28].key===l[25]&&ve(l);return{c(){r&&r.c(),e=de()},l(t){r&&r.l(t),e=de()},m(t,u){r&&r.m(t,u),U(t,e,u)},p(t,u){t[28].key===t[25]?r?r.p(t,u):(r=ve(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){t&&d(e),r&&r.d(t)}}}function ge(l){let e,r,t,u=l[25].toUpperCase()+"",w,m,f=te(l[1].Touches),n=[];for(let a=0;a<f.length;a+=1)n[a]=be(pe(l,f,a));return{c(){e=I("div");for(let a=0;a<n.length;a+=1)n[a].c();r=B(),t=I("p"),w=$(u),m=B(),this.h()},l(a){e=T(a,"DIV",{class:!0});var y=A(e);for(let i=0;i<n.length;i+=1)n[i].l(y);r=O(y),t=T(y,"P",{class:!0});var s=A(t);w=z(s,u),s.forEach(d),m=O(y),y.forEach(d),this.h()},h(){p(t,"class","text-3xl absolute bottom-[90px] font-bold"),p(e,"class","w-full h-full flex justify-center items-center relative")},m(a,y){U(a,e,y);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);o(e,r),o(e,t),o(t,w),o(e,m)},p(a,y){if(y&102){f=te(a[1].Touches);let s;for(s=0;s<f.length;s+=1){const i=pe(a,f,s);n[s]?n[s].p(i,y):(n[s]=be(i),n[s].c(),n[s].m(e,r))}for(;s<n.length;s+=1)n[s].d(1);n.length=f.length}y&32&&u!==(u=a[25].toUpperCase()+"")&&H(w,u)},d(a){a&&d(e),se(n,a)}}}function ke(l){let e,r,t=l[22].Nom+"",u,w,m,f,n=l[10]==="fr"?"Difficulté":"Difficulty",a,y,s=l[22].Difficulte+"",i,g,C,h,M,S,R=!1,E,_,D;function k(){return l[15](l[22])}return E=Ce(l[14][0]),{c(){e=I("div"),r=I("label"),u=$(t),m=B(),f=I("p"),a=$(n),y=$(" : "),i=$(s),g=$("/5"),C=B(),h=I("input"),this.h()},l(P){e=T(P,"DIV",{class:!0});var N=A(e);r=T(N,"LABEL",{class:!0,for:!0});var V=A(r);u=z(V,t),V.forEach(d),m=O(N),f=T(N,"P",{});var v=A(f);a=z(v,n),y=z(v," : "),i=z(v,s),g=z(v,"/5"),v.forEach(d),C=O(N),h=T(N,"INPUT",{type:!0,id:!0,name:!0,class:!0}),N.forEach(d),this.h()},h(){p(r,"class","font-bold"),p(r,"for",w=l[22].Nom),p(h,"type","radio"),p(h,"id",M=l[22].Nom),p(h,"name","niveau"),p(h,"class","mt-2"),h.__value=S=l[22].Nom,ce(h,h.__value),p(e,"class","w-48 h-20 bg-blue-300 outline outline-2 outline-blue-400 flex items-center flex-col justify-center rounded-xl"),E.p(h)},m(P,N){U(P,e,N),o(e,r),o(r,u),o(e,m),o(e,f),o(f,a),o(f,y),o(f,i),o(f,g),o(e,C),o(e,h),h.checked=h.__value===l[8],_||(D=[re(h,"change",l[13]),re(e,"click",k)],_=!0)},p(P,N){l=P,N&1&&t!==(t=l[22].Nom+"")&&H(u,t),N&1&&w!==(w=l[22].Nom)&&p(r,"for",w),N&1024&&n!==(n=l[10]==="fr"?"Difficulté":"Difficulty")&&H(a,n),N&1&&s!==(s=l[22].Difficulte+"")&&H(i,s),N&1&&M!==(M=l[22].Nom)&&p(h,"id",M),N&1&&S!==(S=l[22].Nom)&&(h.__value=S,ce(h,h.__value),R=!0),(R||N&257)&&(h.checked=h.__value===l[8])},d(P){P&&d(e),E.r(),_=!1,we(D)}}}function ye(l){let e,r,t,u,w=l[10]==="fr"?"Vos résultats :":"Your results :",m,f,n,a=l[10]=="fr"?"Vous avez un score de":"Your score is ",y,s,i,g,C,h=l[10]=="fr"?"Votre précision est de":"Your accuracy is ",M,S,R=Math.round(l[3]/l[4]*100)+"",E,_,D,k,P,N=l[10]=="fr"?"Recommencer":"Restart",V,v,j,G=l[10]=="fr"?"Quitter":"Quit",Q,x,L,c,q;return{c(){e=I("div"),r=I("div"),t=I("div"),u=I("h2"),m=$(w),f=B(),n=I("p"),y=$(a),s=B(),i=$(l[3]),g=$(". "),C=I("br"),M=$(h),S=B(),E=$(R),_=$("%"),D=B(),k=I("div"),P=I("button"),V=$(N),v=B(),j=I("a"),Q=$(G),this.h()},l(b){e=T(b,"DIV",{class:!0});var Y=A(e);r=T(Y,"DIV",{class:!0});var K=A(r);t=T(K,"DIV",{class:!0});var J=A(t);u=T(J,"H2",{class:!0});var le=A(u);m=z(le,w),le.forEach(d),f=O(J),n=T(J,"P",{});var F=A(n);y=z(F,a),s=O(F),i=z(F,l[3]),g=z(F,". "),C=T(F,"BR",{}),M=z(F,h),S=O(F),E=z(F,R),_=z(F,"%"),F.forEach(d),J.forEach(d),D=O(K),k=T(K,"DIV",{class:!0});var W=A(k);P=T(W,"BUTTON",{class:!0});var Z=A(P);V=z(Z,N),Z.forEach(d),v=O(W),j=T(W,"A",{class:!0,href:!0});var oe=A(j);Q=z(oe,G),oe.forEach(d),W.forEach(d),K.forEach(d),Y.forEach(d),this.h()},h(){p(u,"class","text-4xl font-bold text-center mb-8"),p(t,"class","text-2xl text-justify"),p(P,"class","bg-yellow-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-yellow-500 transition-all w-2/5"),p(j,"class","bg-red-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-red-500 transition-all w-2/5 flex items-center justify-center"),p(j,"href","/keyboard"),p(k,"class","flex justify-center gap-x-8 mt-4 h-14"),p(r,"class","flex flex-col gap-y-4 w-3/5 py-12 px-12 bg-[#abc8d6] border-4 border-[#859aa5] text-black shadow-xl rounded-xl"),p(e,"class","absolute inset-0 backdrop-blur-sm flex items-center justify-center bg-black bg-opacity-20")},m(b,Y){U(b,e,Y),o(e,r),o(r,t),o(t,u),o(u,m),o(t,f),o(t,n),o(n,y),o(n,s),o(n,i),o(n,g),o(n,C),o(n,M),o(n,S),o(n,E),o(n,_),o(r,D),o(r,k),o(k,P),o(P,V),o(k,v),o(k,j),o(j,Q),L=!0,c||(q=[re(P,"click",l[16]),re(j,"click",l[12])],c=!0)},p(b,Y){(!L||Y&1024)&&w!==(w=b[10]==="fr"?"Vos résultats :":"Your results :")&&H(m,w),(!L||Y&1024)&&a!==(a=b[10]=="fr"?"Vous avez un score de":"Your score is ")&&H(y,a),(!L||Y&8)&&H(i,b[3]),(!L||Y&1024)&&h!==(h=b[10]=="fr"?"Votre précision est de":"Your accuracy is ")&&H(M,h),(!L||Y&24)&&R!==(R=Math.round(b[3]/b[4]*100)+"")&&H(E,R),(!L||Y&1024)&&N!==(N=b[10]=="fr"?"Recommencer":"Restart")&&H(V,N),(!L||Y&1024)&&G!==(G=b[10]=="fr"?"Quitter":"Quit")&&H(Q,G)},i(b){L||(b&&Ne(()=>{L&&(x||(x=ae(e,he,{},!0)),x.run(1))}),L=!0)},o(b){b&&(x||(x=ae(e,he,{},!1)),x.run(0)),L=!1},d(b){b&&d(e),b&&x&&x.end(),c=!1,we(q)}}}function Be(l){let e,r,t,u,w,m,f;const n=[Se,ze],a=[];function y(i,g){return i[7]?1:0}r=y(l),t=a[r]=n[r](l);let s=l[9]&&ye(l);return m=new Me({props:{urlToGo:"/keyboard",taille:"w-10 h-10 bottom-3 left-3",toExecuteBefore:l[12]}}),{c(){e=I("div"),t.c(),u=B(),s&&s.c(),w=B(),Ee(m.$$.fragment),this.h()},l(i){e=T(i,"DIV",{class:!0});var g=A(e);t.l(g),u=O(g),s&&s.l(g),w=O(g),De(m.$$.fragment,g),g.forEach(d),this.h()},h(){p(e,"class","flex px-10 h-screen justify-center flex-col items-center w-screen")},m(i,g){U(i,e,g),a[r].m(e,null),o(e,u),s&&s.m(e,null),o(e,w),Ve(m,e,null),f=!0},p(i,[g]){let C=r;r=y(i),r===C?a[r].p(i,g):(ue(),ee(a[C],1,1,()=>{a[C]=null}),ne(),t=a[r],t?t.p(i,g):(t=a[r]=n[r](i),t.c()),X(t,1),t.m(e,u)),i[9]?s?(s.p(i,g),g&512&&X(s,1)):(s=ye(i),s.c(),X(s,1),s.m(e,w)):s&&(ue(),ee(s,1,1,()=>{s=null}),ne())},i(i){f||(X(t),X(s),X(m.$$.fragment,i),f=!0)},o(i){ee(t),ee(s),ee(m.$$.fragment,i),f=!1},d(i){i&&d(e),a[r].d(),s&&s.d(),Ie(m)}}}function Oe(l,e,r){let t;Pe(l,$e,V=>r(10,t=V));let u=[],w,m=0,f=0,n=0,a=[],y=[],s=["a","z","e","r","t","y","u","i","o","p","q","s","d","f","g","h","j","k","l","m","w","x","c","v","b","n"],i=[],g,C=!1,h="Blue Ocean",M=!1;je(async()=>{window.addEventListener("keydown",R),window.addEventListener("keyup",S),r(0,u=await qe.api.recuperer_niveaux_rythme())});function S(V){C&&r(6,i=i.filter(v=>v!==V.key))}function R(V){if(V.key==="Enter"&&!C)E();else if(C){const v=w.Touches.find(j=>j.key===V.key&&Math.abs(m-j.time)<.35+(j.hold?j.hold_time*.3:0));if(v){if(i.includes(V.key))return;i.push(V.key),v.hold?setTimeout(()=>{i.includes(V.key)&&(y.find(j=>j.key==v.key&&j.time==v.time)||(r(3,f++,f),y.push({time:v.time,key:v.key})))},v.hold_time*.5*1e3-(m-v.time)*1e3):y.find(j=>j.key==v.key&&j.time==v.time)||(r(3,f++,f),y.push({time:v.time,key:v.key}))}}}function E(){r(7,C=!0);const V=u.find(v=>v.Nom===h);if(V){r(4,n=V.Touches.length),r(1,w=V),r(5,a=w.Touches.map(j=>j.key)),r(5,a=a.filter((j,G,Q)=>Q.indexOf(j)===G)),a.sort((j,G)=>s.indexOf(j)-s.indexOf(G)),g=new Audio(`/audio/rythme/${w.Audio}`),g.play();const v=setInterval(()=>{r(2,m=g.currentTime)},10);g.onended=()=>{clearInterval(v),setTimeout(()=>{r(9,M=!0)},1e3)}}}function _(){window.removeEventListener("keydown",R),window.removeEventListener("keyup",S),g.pause()}const D=[[]];function k(){h=this.__value,r(8,h)}return[u,w,m,f,n,a,i,C,h,M,t,E,_,k,D,V=>{r(8,h=V.Nom)},()=>{window.location.reload()}]}class Je extends Le{constructor(e){super(),Ae(this,e,Oe,Be,Te,{})}}export{Je as component};
