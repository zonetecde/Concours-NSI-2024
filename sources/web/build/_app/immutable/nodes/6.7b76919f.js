import{s as Ie,h as je,o as Ne,j as Pe,r as ye,n as ie}from"../chunks/scheduler.551fd30f.js";import{S as Te,i as Ae,g as j,s as O,r as we,h as N,j as T,c as Y,u as Ee,f as h,k as v,a as Q,x as o,v as De,t as X,b as ne,d as K,w as Ve,m as z,n as S,A as le,o as U,H as ae,p as ue,E as re,B as Le,L as Re,F as fe,e as ce}from"../chunks/index.01f77e20.js";import{e as Z}from"../chunks/each.ea5bdd9d.js";import{R as $e,E as qe}from"../chunks/Retour.4b47c2fb.js";import{A as Ce}from"../chunks/Api.2528454f.js";import{f as de}from"../chunks/index.ce3d56e6.js";import{l as Me}from"../chunks/Store.cd8a31f8.js";function he(l,e,r){const t=l.slice();return t[25]=e[r],t}function _e(l,e,r){const t=l.slice();return t[28]=e[r],t}function pe(l,e,r){const t=l.slice();return t[22]=e[r],t}function ze(l){let e,r,t,u,E,m,d,n,a,w,s,i,b=l[10]=="fr"?"Temps restant":"Time left",A,_,L=Math.round(l[1].Duree-l[2])+"",B,q=Z(l[5]),D=[];for(let p=0;p<q.length;p+=1)D[p]=be(he(l,q,p));return{c(){e=j("div"),r=j("div"),t=O(),u=j("div");for(let p=0;p<D.length;p+=1)D[p].c();m=O(),d=j("div"),n=j("p"),a=z("Score : "),w=z(l[3]),s=O(),i=j("p"),A=z(b),_=z(" : "),B=z(L),this.h()},l(p){e=N(p,"DIV",{class:!0});var V=T(e);r=N(V,"DIV",{class:!0}),T(r).forEach(h),t=Y(V),u=N(V,"DIV",{class:!0,style:!0});var g=T(u);for(let k=0;k<D.length;k+=1)D[k].l(g);g.forEach(h),V.forEach(h),m=Y(p),d=N(p,"DIV",{class:!0});var $=T(d);n=N($,"P",{class:!0});var C=T(n);a=S(C,"Score : "),w=S(C,l[3]),C.forEach(h),s=Y($),i=N($,"P",{class:!0});var c=T(i);A=S(c,b),_=S(c," : "),B=S(c,L),c.forEach(h),$.forEach(h),this.h()},h(){v(r,"class","absolute border-y-2 border-[#206442] bg-[#ffffff2d] bottom-[90px] h-[40px] w-full"),v(u,"class","overflow-hidden w-full h-full grid absolute bottom-0 divide-x-2 divide-[#206442]"),v(u,"style",E=`grid-template-columns: repeat(${l[5].length}, minmax(0, 1fr))`),v(e,"class","w-[450px] h-[600px] bg-[#84af80] outline-4 rounded-xl outline-[#206442] outline relative"),v(n,"class","text-2xl"),v(i,"class","text-2xl"),v(d,"class","absolute top-5 w-full flex justify-between items-center px-8")},m(p,V){Q(p,e,V),o(e,r),o(e,t),o(e,u);for(let g=0;g<D.length;g+=1)D[g]&&D[g].m(u,null);Q(p,m,V),Q(p,d,V),o(d,n),o(n,a),o(n,w),o(d,s),o(d,i),o(i,A),o(i,_),o(i,B)},p(p,V){if(V&102){q=Z(p[5]);let g;for(g=0;g<q.length;g+=1){const $=he(p,q,g);D[g]?D[g].p($,V):(D[g]=be($),D[g].c(),D[g].m(u,null))}for(;g<D.length;g+=1)D[g].d(1);D.length=q.length}V&32&&E!==(E=`grid-template-columns: repeat(${p[5].length}, minmax(0, 1fr))`)&&v(u,"style",E),V&8&&U(w,p[3]),V&1024&&b!==(b=p[10]=="fr"?"Temps restant":"Time left")&&U(A,b),V&6&&L!==(L=Math.round(p[1].Duree-p[2])+"")&&U(B,L)},i:ie,o:ie,d(p){p&&(h(e),h(m),h(d)),re(D,p)}}}function Se(l){let e,r="Rythme",t,u,E,m,d,n=l[10]==="fr"?"Règles de l'exercice :":"Exercise rules :",a,w,s,i=l[10]==="fr"?`Des cercles tomberons du haut de l'écran. Appuyer sur la touche correspondante lorsque le cercle est entre les deux barres. 
Si le cercle se prolonge, appuyez sur la touche correspondante au moment où il commence à toucher la ligne jusqu'à ce qu'il finisse de tomber entièrement.`:`Circles will fall from the top of the screen. Press the corresponding key when the circle is between the two bars. 
If the circle extends, press the corresponding key when it starts to touch the line until it finishes falling completely.`,b,A,_,L,B,q=l[10]==="fr"?"Niveaux :":"Levels :",D,p,V,g,$,C=l[10]==="fr"?"Appuyez sur Entrée pour commencer l'exercice":"Press Enter to start the exercise",c,k;u=new qe({props:{image:"/keyboard/rythme.jpg",nom:"Rythme",handleClick:l[11]}});let y=Z(l[0]),R=[];for(let f=0;f<y.length;f+=1)R[f]=ge(pe(l,y,f));return{c(){e=j("h1"),e.textContent=r,t=O(),we(u.$$.fragment),E=O(),m=j("div"),d=j("p"),a=z(n),w=O(),s=j("p"),b=z(i),A=O(),_=j("div"),L=j("div"),B=j("p"),D=z(q),p=O(),V=j("div");for(let f=0;f<R.length;f+=1)R[f].c();g=O(),$=j("p"),c=z(C),this.h()},l(f){e=N(f,"H1",{class:!0,"data-svelte-h":!0}),Le(e)!=="svelte-fck7zt"&&(e.textContent=r),t=Y(f),Ee(u.$$.fragment,f),E=Y(f),m=N(f,"DIV",{class:!0});var P=T(m);d=N(P,"P",{class:!0});var I=T(d);a=S(I,n),I.forEach(h),w=Y(P),s=N(P,"P",{class:!0});var F=T(s);b=S(F,i),F.forEach(h),P.forEach(h),A=Y(f),_=N(f,"DIV",{class:!0});var ee=T(_);L=N(ee,"DIV",{class:!0});var M=T(L);B=N(M,"P",{class:!0});var H=T(B);D=S(H,q),H.forEach(h),p=Y(M),V=N(M,"DIV",{class:!0});var G=T(V);for(let W=0;W<R.length;W+=1)R[W].l(G);G.forEach(h),M.forEach(h),ee.forEach(h),g=Y(f),$=N(f,"P",{class:!0});var J=T($);c=S(J,C),J.forEach(h),this.h()},h(){v(e,"class","font-bold text-3xl mb-6 mt-7"),v(d,"class","mt-8 text-xl mb-4"),v(s,"class","text-lg"),v(m,"class","text-center"),v(B,"class","pr-2 mb-2"),v(V,"class","flex gap-x-8"),v(L,"class","flex flex-col w-full"),v(_,"class","md:w-full max-w-[1000px] mt-4 p-4 justify-center items-center flex flex-row bg-[#ffffff25] rounded-xl"),v($,"class","mt-8 mb-5")},m(f,P){Q(f,e,P),Q(f,t,P),De(u,f,P),Q(f,E,P),Q(f,m,P),o(m,d),o(d,a),o(m,w),o(m,s),o(s,b),Q(f,A,P),Q(f,_,P),o(_,L),o(L,B),o(B,D),o(L,p),o(L,V);for(let I=0;I<R.length;I+=1)R[I]&&R[I].m(V,null);Q(f,g,P),Q(f,$,P),o($,c),k=!0},p(f,P){if((!k||P&1024)&&n!==(n=f[10]==="fr"?"Règles de l'exercice :":"Exercise rules :")&&U(a,n),(!k||P&1024)&&i!==(i=f[10]==="fr"?`Des cercles tomberons du haut de l'écran. Appuyer sur la touche correspondante lorsque le cercle est entre les deux barres. 
Si le cercle se prolonge, appuyez sur la touche correspondante au moment où il commence à toucher la ligne jusqu'à ce qu'il finisse de tomber entièrement.`:`Circles will fall from the top of the screen. Press the corresponding key when the circle is between the two bars. 
If the circle extends, press the corresponding key when it starts to touch the line until it finishes falling completely.`)&&U(b,i),(!k||P&1024)&&q!==(q=f[10]==="fr"?"Niveaux :":"Levels :")&&U(D,q),P&1281){y=Z(f[0]);let I;for(I=0;I<y.length;I+=1){const F=pe(f,y,I);R[I]?R[I].p(F,P):(R[I]=ge(F),R[I].c(),R[I].m(V,null))}for(;I<R.length;I+=1)R[I].d(1);R.length=y.length}(!k||P&1024)&&C!==(C=f[10]==="fr"?"Appuyez sur Entrée pour commencer l'exercice":"Press Enter to start the exercise")&&U(c,C)},i(f){k||(K(u.$$.fragment,f),k=!0)},o(f){X(u.$$.fragment,f),k=!1},d(f){f&&(h(e),h(t),h(E),h(m),h(A),h(_),h(g),h($)),Ve(u,f),re(R,f)}}}function me(l){let e,r;return{c(){e=j("div"),this.h()},l(t){e=N(t,"DIV",{class:!0,style:!0}),T(e).forEach(h),this.h()},h(){v(e,"class","w-10 h-10 rounded-full absolute key svelte-1sd71nn"),v(e,"style",r=`height: ${l[28].hold?l[28].hold_time*120:"40"}px;
									
									top: ${l[2]>=l[28].time-4?`calc(100% + ${l[28].hold_time*120}px)`:`calc(-10% - ${l[28].hold_time*120}px)`}; 
									transition: top ${l[28].time-l[2]+1+(l[28].hold?l[28].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(l[2]-l[28].time)<(l[28].hold?l[28].hold_time*.7:.1)&&l[6].includes(l[25])?"background-color: red;":"background-color: #4d4bd4;"}`)},m(t,u){Q(t,e,u)},p(t,u){u&102&&r!==(r=`height: ${t[28].hold?t[28].hold_time*120:"40"}px;
									
									top: ${t[2]>=t[28].time-4?`calc(100% + ${t[28].hold_time*120}px)`:`calc(-10% - ${t[28].hold_time*120}px)`}; 
									transition: top ${t[28].time-t[2]+1+(t[28].hold?t[28].hold_time*1.55:0)}s linear, background-color 0.2s ease; ${Math.abs(t[2]-t[28].time)<(t[28].hold?t[28].hold_time*.7:.1)&&t[6].includes(t[25])?"background-color: red;":"background-color: #4d4bd4;"}`)&&v(e,"style",r)},d(t){t&&h(e)}}}function ve(l){let e,r=l[28].key===l[25]&&me(l);return{c(){r&&r.c(),e=ce()},l(t){r&&r.l(t),e=ce()},m(t,u){r&&r.m(t,u),Q(t,e,u)},p(t,u){t[28].key===t[25]?r?r.p(t,u):(r=me(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){t&&h(e),r&&r.d(t)}}}function be(l){let e,r,t,u=l[25].toUpperCase()+"",E,m,d=Z(l[1].Touches),n=[];for(let a=0;a<d.length;a+=1)n[a]=ve(_e(l,d,a));return{c(){e=j("div");for(let a=0;a<n.length;a+=1)n[a].c();r=O(),t=j("p"),E=z(u),m=O(),this.h()},l(a){e=N(a,"DIV",{class:!0});var w=T(e);for(let i=0;i<n.length;i+=1)n[i].l(w);r=Y(w),t=N(w,"P",{class:!0});var s=T(t);E=S(s,u),s.forEach(h),m=Y(w),w.forEach(h),this.h()},h(){v(t,"class","text-3xl absolute bottom-[90px] font-bold"),v(e,"class","w-full h-full flex justify-center items-center relative")},m(a,w){Q(a,e,w);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);o(e,r),o(e,t),o(t,E),o(e,m)},p(a,w){if(w&102){d=Z(a[1].Touches);let s;for(s=0;s<d.length;s+=1){const i=_e(a,d,s);n[s]?n[s].p(i,w):(n[s]=ve(i),n[s].c(),n[s].m(e,r))}for(;s<n.length;s+=1)n[s].d(1);n.length=d.length}w&32&&u!==(u=a[25].toUpperCase()+"")&&U(E,u)},d(a){a&&h(e),re(n,a)}}}function ge(l){let e,r,t=l[22].Nom+"",u,E,m,d,n=l[10]==="fr"?"Difficulté":"Difficulty",a,w,s=l[22].Difficulte+"",i,b,A,_,L,B,q=!1,D,p,V,g;function $(){return l[15](l[22])}return p=Re(l[14][0]),{c(){e=j("div"),r=j("label"),u=z(t),m=O(),d=j("p"),a=z(n),w=z(" : "),i=z(s),b=z("/5"),A=O(),_=j("input"),D=O(),this.h()},l(C){e=N(C,"DIV",{class:!0});var c=T(e);r=N(c,"LABEL",{class:!0,for:!0});var k=T(r);u=S(k,t),k.forEach(h),m=Y(c),d=N(c,"P",{});var y=T(d);a=S(y,n),w=S(y," : "),i=S(y,s),b=S(y,"/5"),y.forEach(h),A=Y(c),_=N(c,"INPUT",{type:!0,id:!0,name:!0,class:!0}),D=Y(c),c.forEach(h),this.h()},h(){v(r,"class","font-bold"),v(r,"for",E=l[22].Nom),v(_,"type","radio"),v(_,"id",L=l[22].Nom),v(_,"name","niveau"),v(_,"class","mt-2"),_.__value=B=l[22].Nom,fe(_,_.__value),v(e,"class","w-48 h-20 bg-blue-300 outline outline-2 outline-blue-400 flex items-center flex-col justify-center rounded-xl"),p.p(_)},m(C,c){Q(C,e,c),o(e,r),o(r,u),o(e,m),o(e,d),o(d,a),o(d,w),o(d,i),o(d,b),o(e,A),o(e,_),_.checked=_.__value===l[8],o(e,D),V||(g=[le(_,"change",l[13]),le(e,"click",$)],V=!0)},p(C,c){l=C,c&1&&t!==(t=l[22].Nom+"")&&U(u,t),c&1&&E!==(E=l[22].Nom)&&v(r,"for",E),c&1024&&n!==(n=l[10]==="fr"?"Difficulté":"Difficulty")&&U(a,n),c&1&&s!==(s=l[22].Difficulte+"")&&U(i,s),c&1&&L!==(L=l[22].Nom)&&v(_,"id",L),c&1&&B!==(B=l[22].Nom)&&(_.__value=B,fe(_,_.__value),q=!0),(q||c&257)&&(_.checked=_.__value===l[8])},d(C){C&&h(e),p.r(),V=!1,ye(g)}}}function ke(l){let e,r,t,u,E=l[10]==="fr"?"Vos résultats :":"Your results :",m,d,n,a=l[10]=="fr"?"Vous avez un score de":"Your score is ",w,s,i,b,A,_=l[10]=="fr"?"Votre précision est de":"Your accuracy is ",L,B,q=Math.round(l[3]/l[4]*100)+"",D,p,V,g,$,C=l[10]=="fr"?"Recommencer":"Restart",c,k,y,R=l[10]=="fr"?"Quitter":"Quit",f,P,I,F,ee;return{c(){e=j("div"),r=j("div"),t=j("div"),u=j("h2"),m=z(E),d=O(),n=j("p"),w=z(a),s=O(),i=z(l[3]),b=z(". "),A=j("br"),L=z(_),B=O(),D=z(q),p=z("%"),V=O(),g=j("div"),$=j("button"),c=z(C),k=O(),y=j("a"),f=z(R),this.h()},l(M){e=N(M,"DIV",{class:!0});var H=T(e);r=N(H,"DIV",{class:!0});var G=T(r);t=N(G,"DIV",{class:!0});var J=T(t);u=N(J,"H2",{class:!0});var W=T(u);m=S(W,E),W.forEach(h),d=Y(J),n=N(J,"P",{});var x=T(n);w=S(x,a),s=Y(x),i=S(x,l[3]),b=S(x,". "),A=N(x,"BR",{}),L=S(x,_),B=Y(x),D=S(x,q),p=S(x,"%"),x.forEach(h),J.forEach(h),V=Y(G),g=N(G,"DIV",{class:!0});var te=T(g);$=N(te,"BUTTON",{class:!0});var se=T($);c=S(se,C),se.forEach(h),k=Y(te),y=N(te,"A",{class:!0,href:!0});var oe=T(y);f=S(oe,R),oe.forEach(h),te.forEach(h),G.forEach(h),H.forEach(h),this.h()},h(){v(u,"class","text-4xl font-bold text-center mb-8"),v(t,"class","text-2xl text-justify"),v($,"class","bg-yellow-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-yellow-500 transition-all w-2/5"),v(y,"class","bg-red-400 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-red-500 transition-all w-2/5 flex items-center justify-center"),v(y,"href","/keyboard"),v(g,"class","flex justify-center gap-x-8 mt-4 h-14"),v(r,"class","flex flex-col gap-y-4 w-3/5 py-12 px-12 bg-[#abc8d6] border-4 border-[#859aa5] text-black shadow-xl rounded-xl"),v(e,"class","absolute inset-0 backdrop-blur-sm flex items-center justify-center bg-black bg-opacity-20")},m(M,H){Q(M,e,H),o(e,r),o(r,t),o(t,u),o(u,m),o(t,d),o(t,n),o(n,w),o(n,s),o(n,i),o(n,b),o(n,A),o(n,L),o(n,B),o(n,D),o(n,p),o(r,V),o(r,g),o(g,$),o($,c),o(g,k),o(g,y),o(y,f),I=!0,F||(ee=[le($,"click",l[16]),le(y,"click",l[12])],F=!0)},p(M,H){(!I||H&1024)&&E!==(E=M[10]==="fr"?"Vos résultats :":"Your results :")&&U(m,E),(!I||H&1024)&&a!==(a=M[10]=="fr"?"Vous avez un score de":"Your score is ")&&U(w,a),(!I||H&8)&&U(i,M[3]),(!I||H&1024)&&_!==(_=M[10]=="fr"?"Votre précision est de":"Your accuracy is ")&&U(L,_),(!I||H&24)&&q!==(q=Math.round(M[3]/M[4]*100)+"")&&U(D,q),(!I||H&1024)&&C!==(C=M[10]=="fr"?"Recommencer":"Restart")&&U(c,C),(!I||H&1024)&&R!==(R=M[10]=="fr"?"Quitter":"Quit")&&U(f,R)},i(M){I||(M&&Pe(()=>{I&&(P||(P=ae(e,de,{},!0)),P.run(1))}),I=!0)},o(M){M&&(P||(P=ae(e,de,{},!1)),P.run(0)),I=!1},d(M){M&&h(e),M&&P&&P.end(),F=!1,ye(ee)}}}function Be(l){let e,r,t,u,E,m,d;const n=[Se,ze],a=[];function w(i,b){return i[7]?1:0}r=w(l),t=a[r]=n[r](l);let s=l[9]&&ke(l);return m=new $e({props:{urlToGo:"/keyboard",taille:"w-10 h-10 bottom-3 left-3",toExecuteBefore:l[12]}}),{c(){e=j("div"),t.c(),u=O(),s&&s.c(),E=O(),we(m.$$.fragment),this.h()},l(i){e=N(i,"DIV",{class:!0});var b=T(e);t.l(b),u=Y(b),s&&s.l(b),E=Y(b),Ee(m.$$.fragment,b),b.forEach(h),this.h()},h(){v(e,"class","flex px-10 h-screen justify-center flex-col items-center w-screen")},m(i,b){Q(i,e,b),a[r].m(e,null),o(e,u),s&&s.m(e,null),o(e,E),De(m,e,null),d=!0},p(i,[b]){let A=r;r=w(i),r===A?a[r].p(i,b):(ue(),X(a[A],1,1,()=>{a[A]=null}),ne(),t=a[r],t?t.p(i,b):(t=a[r]=n[r](i),t.c()),K(t,1),t.m(e,u)),i[9]?s?(s.p(i,b),b&512&&K(s,1)):(s=ke(i),s.c(),K(s,1),s.m(e,E)):s&&(ue(),X(s,1,1,()=>{s=null}),ne())},i(i){d||(K(t),K(s),K(m.$$.fragment,i),d=!0)},o(i){X(t),X(s),X(m.$$.fragment,i),d=!1},d(i){i&&h(e),a[r].d(),s&&s.d(),Ve(m)}}}function Oe(l,e,r){let t;je(l,Me,c=>r(10,t=c));let u=[],E,m=0,d=0,n=0,a=[],w=[],s=["a","z","e","r","t","y","u","i","o","p","q","s","d","f","g","h","j","k","l","m","w","x","c","v","b","n"],i=[],b,A=!1,_="Blue Ocean",L=!1;Ne(async()=>{window.addEventListener("keydown",q),window.addEventListener("keyup",B),r(0,u=await Ce.api.recuperer_niveaux_rythme())});function B(c){A&&r(6,i=i.filter(k=>k!==c.key))}function q(c){if(c.key==="Enter"&&!A)D();else if(A){const k=E.Touches.find(y=>y.key===c.key&&Math.abs(m-y.time)<.35+(y.hold?y.hold_time*.3:0));if(k){if(i.includes(c.key))return;i.push(c.key),k.hold?setTimeout(()=>{i.includes(c.key)&&(w.find(y=>y.key==k.key&&y.time==k.time)||(r(3,d++,d),w.push({time:k.time,key:k.key})))},k.hold_time*.5*1e3-(m-k.time)*1e3):w.find(y=>y.key==k.key&&y.time==k.time)||(r(3,d++,d),w.push({time:k.time,key:k.key}))}}}function D(){r(7,A=!0);const c=u.find(k=>k.Nom===_);if(c){r(4,n=c.Touches.length),r(1,E=c),r(5,a=E.Touches.map(y=>y.key)),r(5,a=a.filter((y,R,f)=>f.indexOf(y)===R)),a.sort((y,R)=>s.indexOf(y)-s.indexOf(R)),b=new Audio(`/audio/rythme/${E.Audio}`),b.play();const k=setInterval(()=>{r(2,m=b.currentTime)},10);b.onended=()=>{clearInterval(k),setTimeout(()=>{r(9,L=!0)},1e3)}}}function p(){window.removeEventListener("keydown",q),window.removeEventListener("keyup",B),b.pause()}const V=[[]];function g(){_=this.__value,r(8,_)}return[u,E,m,d,n,a,i,A,_,L,t,D,p,g,V,c=>{r(8,_=c.Nom)},()=>{window.location.reload()}]}class Je extends Te{constructor(e){super(),Ae(this,e,Oe,Be,Ie,{})}}export{Je as component};
