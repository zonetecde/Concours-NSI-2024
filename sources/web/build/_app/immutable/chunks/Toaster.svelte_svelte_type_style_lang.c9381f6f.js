import{t as j,d as C}from"./index.37099c80.js";import{r as H,k as E}from"./scheduler.358e0755.js";import{d as I,w as L}from"./index.20399e6f.js";function ne(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function te(e,t){j(e,1,1,()=>{t.delete(e.key)})}function se(e,t,n,s,l,h,c,A,T,w,p,R){let u=e.length,f=h.length,r=u;const a={};for(;r--;)a[e[r].key]=r;const d=[],o=new Map,_=new Map,D=[];for(r=f;r--;){const i=R(l,h,r),v=n(i);let y=c.get(v);y?s&&D.push(()=>y.p(i,t)):(y=w(v,i),y.c()),o.set(v,d[r]=y),v in a&&_.set(v,Math.abs(r-a[v]))}const M=new Set,Q=new Set;function V(i){C(i,1),i.m(A,p),c.set(i.key,i),p=i.first,f--}for(;u&&f;){const i=d[f-1],v=e[u-1],y=i.key,S=v.key;i===v?(p=i.first,u--,f--):o.has(S)?!c.has(y)||M.has(y)?V(i):Q.has(S)?u--:_.get(y)>_.get(S)?(Q.add(y),V(i)):(M.add(S),u--):(T(v,c),u--)}for(;u--;){const i=e[u];o.has(i.key)||T(i,c)}for(;f;)V(d[f-1]);return H(D),d}function N(e,t,n,s){var l,h,c=!1,A=n.length>=2,T=(r,a,d)=>{if(l=a,A&&(h=r),!c){let o=t(r,a,d);if(t.length<2)a(o);else return o}c=!1},w=I(e,T,s),p=!Array.isArray(e);function R(r){var a=n(r,h);p?(c=!0,e.set(a)):a.forEach((d,o)=>{c=!0,e[o].set(d)}),c=!1}var u=!1;function f(r){var a,d,o,_;if(u){_=r(E(w)),l(_);return}var D=w.subscribe(M=>{u?a?d=!0:a=!0:o=M});_=r(o),u=!0,l(_),D(),u=!1,d&&(_=E(w)),a&&R(_)}return{subscribe:w.subscribe,set(r){f(()=>r)},update:f}}const U=20,g=L([]),P=L(null),k=new Map,x=e=>{if(k.has(e))return;const t=setTimeout(()=>{k.delete(e),W(e)},1e3);k.set(e,t)},q=e=>{const t=k.get(e);t&&clearTimeout(t)};function z(e){e.id&&q(e.id),g.update(t=>t.map(n=>n.id===e.id?{...n,...e}:n))}function F(e){g.update(t=>[e,...t].slice(0,U))}function G(e){E(g).find(t=>t.id===e.id)?z(e):F(e)}function J(e){g.update(t=>(e?x(e):t.forEach(n=>{x(n.id)}),t.map(n=>n.id===e||e===void 0?{...n,visible:!1}:n)))}function W(e){g.update(t=>e===void 0?[]:t.filter(n=>n.id!==e))}function re(e){P.set(e)}function ie(e){let t;P.update(n=>(t=e-(n||0),null)),g.update(n=>n.map(s=>({...s,pauseDuration:s.pauseDuration+t})))}const K={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function ue(e={}){return{toasts:N(g,n=>n.map(s=>{var l,h;return{...e,...e[s.type],...s,duration:s.duration||((l=e[s.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||K[s.type],style:[e.style,(h=e[s.type])==null?void 0:h.style,s.style].join(";")}}),n=>n),pausedAt:P}}const X=e=>typeof e=="function",B=(e,t)=>X(e)?e(t):e,Y=(()=>{let e=0;return()=>(e+=1,e.toString())})(),ae=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){const t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Z=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Y()}),b=e=>(t,n)=>{const s=Z(t,e,n);return G(s),s.id},m=(e,t)=>b("blank")(e,t);m.error=b("error");m.success=b("success");m.loading=b("loading");m.custom=b("custom");m.dismiss=e=>{J(e)};m.remove=e=>W(e);m.promise=(e,t,n)=>{const s=m.loading(t.loading,{...n,...n==null?void 0:n.loading});return e.then(l=>(m.success(B(t.success,l),{id:s,...n,...n==null?void 0:n.success}),l)).catch(l=>{m.error(B(t.error,l),{id:s,...n,...n==null?void 0:n.error})}),e};export{z as a,ne as b,se as c,ie as e,te as o,ae as p,re as s,m as t,ue as u};
